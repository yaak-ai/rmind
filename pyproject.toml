[tool.poetry]
name = "cargpt"
version = "0.1.0"
description = ""
authors = ["Evgenii Gorchakov <evgenii@yaak.ai>"]
readme = "README.md"

[tool.poetry.dependencies]
python = ">=3.10,<3.11"
pytorch-lightning = "^1.9.0"
einops = "^0.6.0"
hydra-core = "^1.3.0"
loguru = "^0.6.0"
jaxtyping = "*"
beartype = "*"
torch = "^1.13.1"
torchvision = "^0.14.1"
more-itertools = "^9.0.0"
torchinfo = "^1.7.2"
torchaudio = "=0.13.1"
deephouse = {git = "git@github.com:yaak-ai/deephouse.git", rev = "main"}
dall-e = {git = "git@github.com:openai/DALL-E.git", rev = "master"}
wandb = "*"
pillow = ">=9.5.0"
dill = "^0.3.6"
tqdm = "=4.65.0"
transformers = "=4.30.2"

[build-system]
requires = ["poetry-core>=1.5.0"]
build-backend = "poetry.core.masonry.api"

[tool.poetry.group.train]
optional = true

[tool.poetry.group.train.dependencies]
omegaconf = "^2.3.0"
yaak-datasets = {git = "git@github.com:yaak-ai/yaak-datasets.git", rev = "v0.13.1"}

[tool.poetry.group.lint]
optional = true

[tool.poetry.group.lint.dependencies]
pyright = "*"
black = "*"
ruff = "*"
deptry = "*"
opencv-stubs = "*"

[tool.poetry.group.dev]
optional = true

[tool.poetry.group.dev.dependencies]
ipdb = "*"
ipython = "*"
pudb = "*"
pytest-pudb = "*"
jupyterlab = "*"
jupyterlab-vim = "*"
torchshow = "*"
ipython-autoimport = "*"
pyfzf = "*"
ruff-lsp = "*"
pyright = "*"

[tool.poetry.group.vis]
optional = true

[tool.poetry.group.vis.dependencies]
grad-cam = "*"

[tool.poetry.group.dvc]
optional = true

[tool.poetry.group.dvc.dependencies]
dvc = {version = "^2.58.1", extras = ["s3"]}

[tool.pyright]
typeCheckingMode = "basic"
reportMissingTypeStubs = false
reportMissingImports = false
reportPrivateImportUsage = false
exclude = [
  'wandb/',
]


[tool.black]
line-length = 88

[tool.ruff]
fix = true
ignore = ["E501", "F722", "F821"]
select = ["I001"]

[tool.deptry.per_rule_ignores]
DEP001 = ["cv2", "fiftyone", "pytorch_grad_cam"]
DEP002 = ["beartype", "torchaudio", "dill", "transformers"]
DEP003 = ["numpy"]
DEP004 = ["omegaconf", "pytorch_grad_cam"]
