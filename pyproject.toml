[tool.poetry]
name = "cargpt"
version = "0.2.0"
description = ""
authors = ["Evgenii Gorchakov <evgenii@yaak.ai>"]
readme = "README.md"

[tool.poetry.dependencies]
python = ">=3.10,<3.11"
pytorch-lightning = "^2.0.6"
einops = "^0.6.0"
hydra-core = "^1.3.0"
loguru = "^0.6.0"
jaxtyping = "*"
beartype = "*"
torch = {version = "^2.0.1", source = "torch-cu118"}
torchvision = {version = "^0.15.2", source = "torch-cu118"}
more-itertools = "^9.0.0"
torchinfo = "^1.7.2"
torchaudio = {version = "^2.0.2", source = "torch-cu118"}
deephouse = {git = "git@github.com:yaak-ai/deephouse.git", rev = "v0.3.0"}
dall-e = {git = "git@github.com:openai/DALL-E.git", rev = "master"}
wandb = "*"
pillow = ">=9.5.0"
dill = "^0.3.6"
tqdm = "=4.65.0"
transformers = "=4.30.2"

[[tool.poetry.source]]
name = "torch-cu118"
url = "https://download.pytorch.org/whl/cu118"
priority = "explicit"

[build-system]
requires = ["poetry-core>=1.5.0"]
build-backend = "poetry.core.masonry.api"

[tool.poetry.group.train]
optional = true

[tool.poetry.group.train.dependencies]
omegaconf = "^2.3.0"
yaak-datasets = {git = "git@github.com:yaak-ai/yaak-datasets.git", rev = "v0.15.1"}

[tool.poetry.group.lint]
optional = true

[tool.poetry.group.lint.dependencies]
pyright = "*"
black = "*"
ruff = "*"
deptry = "*"
opencv-stubs = "*"

[tool.poetry.group.dev]
optional = true

[tool.poetry.group.dev.dependencies]
ipdb = "*"
ipython = "*"
pudb = "*"
pytest-pudb = "*"
jupyterlab = "*"
jupyterlab-vim = "*"
torchshow = "*"
ipython-autoimport = "*"
pyfzf = "*"
ruff-lsp = "*"
pyright = "*"

[tool.poetry.group.vis]
optional = true

[tool.poetry.group.vis.dependencies]
grad-cam = "*"

[tool.poetry.group.dvc]
optional = true

[tool.poetry.group.dvc.dependencies]
dvc = {version = "^2.58.1", extras = ["s3"]}

[tool.pyright]
typeCheckingMode = "basic"
reportMissingTypeStubs = false
reportMissingImports = false
reportPrivateImportUsage = false
exclude = [
  'wandb/',
]


[tool.black]
line-length = 88

[tool.ruff]
fix = true
ignore = ["E501", "F722", "F821"]
select = ["I001"]

[tool.deptry.per_rule_ignores]
DEP001 = ["cv2", "fiftyone", "pytorch_grad_cam"]
DEP002 = ["beartype", "torchaudio", "dill", "transformers"]
DEP003 = ["numpy"]
DEP004 = ["omegaconf", "pytorch_grad_cam"]
